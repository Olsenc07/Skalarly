<div>
<progress id="progress" [value]="progressValue" max="100"> </progress>
  <mat-stepper orientation="horizontal" #stepper >
    <!-- only step when form is valid -->
<mat-step>
  <ng-template matStepLabel>Choose your instituition</ng-template>
<app-reusable-dropdown [countryApi]="true" [label]="'Country'" [List$]="country$"
(selectedChange)="updateCountrySelection($event)" [hint]="'Which country do you study in?'">
</app-reusable-dropdown>
<!-- if province-state needs to be chosen -->
@if(displayStateProvince) {
<app-reusable-dropdown [label]="'State or Province'"  [List$]="region$"
(selectedChange)="stateSelection($event)"  [hint]="'Which State or Province is your school in?'">
</app-reusable-dropdown>
}
<!-- Institution selection -->
@if(institutionsLoaded){
<app-reusable-dropdown [label]="'Where do you attend school?'" [List$]="institutions$"
(selectedChange)="chosenInstituition($event)" [hint]="'Current academic instituiton'">
</app-reusable-dropdown>
}
<div>
  <button mat-button matStepperNext type="button">Next</button>
</div>
</mat-step>
<!-- make this form in a reusable file!! -->
<mat-step>  
<form [formGroup]="signUpForm" (ngSubmit)="createAccount()">
  <ng-template matStepLabel>Account Info</ng-template>
  <app-reusable-inputs [control]="usernameControl" label="Username" placeholder="Username" icon="fa-solid fa-user-graduate"
  [error]="getError('username') | errorPipe"
  (controlValueChanged)="handleValueChange('username', $event)"></app-reusable-inputs>
  
  <app-reusable-inputs [control]="emailControl" label="Email" placeholder="Email" icon="fa-solid fa-at"
  [error]="getError('username') | errorPipe"
  (controlValueChanged)="handleValueChange('email', $event)"></app-reusable-inputs>
  
  <app-reusable-input-password [control]="passwordControl" label="Password" placeholder="Password" icon="fa-solid fa-lock" controlType="password"
  (controlValueChanged)="handleValueChange('password', $event)"></app-reusable-input-password>
  
  <!-- Password Requirements -->
<button mat-raised-button type="submit" [disabled]="signUpForm.invalid" initial>
  Validate
</button>
</form>
<div>
  <button mat-button matStepperPrevious type="button">Back</button>
  <button mat-button matStepperNext type="button" (click)="sendEmail()">Next</button>
</div></mat-step>
<!-- Onto Validation 7 digits from email-->
<mat-step>
  <ng-template matStepLabel>Basic Info</ng-template>
  <div>
    image upload
    <app-reusable-inputs [label]="'Full Name'"></app-reusable-inputs>
    <mat-form-field>
      <mat-label>Birthday</mat-label>
      <input matInput [matDatepicker]="picker">
      <mat-hint>MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <mat-slide-toggle> Private Account
    </mat-slide-toggle>
    <!-- <mat-form-field>
    <input matInput type="file" (change)="onFileSelected($event)">
  </mat-form-field>
    <button (click)="onUpload()">Upload</button>
    <img [src]="imagePreview" *ngIf="imagePreview" class="image-preview"> -->
  </div>
  
  <!-- Profile Picture, Year of studies, Birthday, 
  Drop dowm for 'looking to obtain ..', bio -->
  <div>
  <button mat-button matStepperPrevious type="button">Back</button>
  <button mat-button matStepperNext type="button">Next</button>
</div>
</mat-step>
<mat-step>
  <ng-template matStepLabel>Academic Info</ng-template>
    <form [formGroup]="skalarInfoForm" (ngSubmit)="addSkalarInfo()">
      <app-inputs-dynamic [inputsArray]="getArray('major')" placeholder="Major"></app-inputs-dynamic>
      <app-inputs-dynamic [inputsArray]="getArray('minor')" placeholder="Minor"></app-inputs-dynamic>
      <app-inputs-dynamic [inputsArray]="getArray('sport')" placeholder="Sport"></app-inputs-dynamic>
      <app-inputs-dynamic [inputsArray]="getArray('club')" placeholder="Club"></app-inputs-dynamic>
      <app-inputs-dynamic [inputsArray]="getArray('coursesCompleted')" placeholder="Course Code"></app-inputs-dynamic>
      <app-inputs-dynamic [inputsArray]="getArray('coursesPursing')" placeholder="Course Code"></app-inputs-dynamic>
      <!-- <input accoldates, certificates, publishings,... /> -->
    </form>
    <form>
    </form>
    <form>
    </form>
    <div>
    <button mat-button matStepperPrevious type="button">Back</button>
    <button mat-button matStepperNext type="button">Next</button>
    <button mat-raised-button type="submit" [disabled]="skalarInfoForm.invalid">Create</button>
  </div>
</mat-step>
</mat-stepper>
</div>