<progress id="progress" [value]="progressValue" max="100"> </progress>
<!-- choosing the instituiton sets email varification
have canada, usa at top  -->
<app-reusable-inputs [label]="'Country of study'" [List$]="country$"
(selectedChange)="updateCountrySelection($event)" [hint]="'Which country do you study in?'">
</app-reusable-inputs>
<!-- if province-state needs to be chosen -->
<ng-container *ngIf="displayStateProvince">
<app-reusable-inputs [label]="'State or Province'"  [List$]="region$"
(selectedChange)="stateSelection($event)"  [hint]="'Which State or Province is your school in?'">
</app-reusable-inputs>
</ng-container>
<!-- Institution selection -->
<ng-container *ngIf="institutionsLoaded">
<app-reusable-inputs [label]="'Where do you attend school?'" [List$]="institutions$"
(selectedChange)="chosenInstituition($event)" [hint]="'Current academic instituiton'">
</app-reusable-inputs>
</ng-container>
<!-- make this form in a reusable file!! -->
<form [formGroup]="signUpForm" (ngSubmit)="createAccount()">
  <!-- username -->
  <mat-form-field>
    <mat-label>
      <i [class.condition-met]="signUpForm.get('username')?.valid" matSuffix
       class="fa-solid fa-user-graduate"></i>
    </mat-label>
    <input matInput type="text" placeholder="Username" required
    formControlName="username" [value]="signUpForm.get('username')?.value | removeSpaces">
    <ng-container *ngIf="signUpForm.get('username')?.hasError">
    <mat-error *ngIf="signUpForm.get('username')?.hasError('required')">A Username is required.</mat-error>
    <mat-error *ngIf="signUpForm.get('username')?.hasError('uniqueUserNameError')">Username is already in use. Please try another</mat-error>
    <mat-error *ngIf="signUpForm.get('username')?.hasError('patternUserNameError')">Only letters, numbers and underscores are allowed</mat-error>
  </ng-container>
  </mat-form-field>
  <!-- create email -->
  <mat-form-field>
    <mat-label>
      <i [class.condition-met]="signUpForm.get('email')?.valid" matSuffix
       class="fa-solid fa-at"></i>
    </mat-label>
    <input matInput type="email" placeholder="name@school" required
    formControlName="email" [value]="signUpForm.get('email')?.value | removeSpaces">
    <ng-container *ngIf="signUpForm.get('email')?.hasError">
    <mat-error *ngIf="signUpForm.get('email')?.hasError('required')">An academic email is required.</mat-error>
    <mat-error *ngIf="signUpForm.get('email')?.hasError('uniqueEmailError')">Email is already in use. Please try another.</mat-error>
    <mat-error *ngIf="signUpForm.get('email')?.hasError('patternEmailError')">This email doesn't match the format of the institue you have chosen.</mat-error>
  </ng-container>
  </mat-form-field>
<!-- create password -->
<mat-form-field>
    <mat-label>
        <i [class.condition-met]="signUpForm.get('password')?.valid" 
         matSuffix class="fa-solid fa-lock"></i>
    </mat-label>
    <input matInput type="password" placeholder="Password" required
    formControlName="password" [value]="signUpForm.get('password')?.value | removeSpaces"> 
    <!-- toggle password visibility -->
    <button matSuffix mat-icon-button  [ngClass]="{ 'showing': visiblePassword }"
    (click)="toggleVisibility()"
    matTooltip="{{ visiblePassword ? 'Show Password' : 'Hide Password' }}" >
      <i class="fa-solid fa-eye"></i>
    </button>
</mat-form-field>


  <!-- Password Requirements -->
  <!-- unrendered when no value or conditons are met -->
  <ng-template *ngIf="signUpForm.get('password')?.value && signUpForm.get('password')?.invalid">
  <div class="password-requirements">
    <p>Password Requirements:</p>
    <ul>
      <li #length>At least 8 characters</li>
      <li #uppercase>At least one uppercase letter (A-Z)</li>
      <li #lowercase>At least one lowercase letter (a-z)</li>
      <li #digit>At least one digit (0-9)</li>
      <li #special>At least one special character (e.g., "&#64;"#$%^&+=!)</li>
    </ul>
  </div>
</ng-template>
<button mat-raised-button type="submit" [disabled]="signUpForm.invalid">
  Validate
</button>
</form>
<!-- Onto Validation 7 digits from email-->
