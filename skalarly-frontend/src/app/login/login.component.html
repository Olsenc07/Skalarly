<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Login Page</title>
</head>

<body>
<div class="body">
  <!-- logo and welcoming words -->
<div class="login-header">
<figure>
  <!-- logo glows on valid login -->
  <img ngSrc="../../assets/images/Skalar_Hat_Icon.png" fill priority>
  <figcaption>
  Skalarly
  </figcaption>
</figure>
<h2> Enhance Your University Experience</h2>
</div>

<!-- content projection to be used in error handler -->
  <ng-container login-content>
<form [formGroup]="loginForm" (ngSubmit)="login()">
  <!-- enter email -->
  <mat-form-field  appearance="outline">
    <input matInput formControlName="email" required type="email"
    id="skalarlyEmail" />
    <mat-label [class.email-valid]="loginForm.get('email')!.valid">
      <span matSuffix class="material-symbols-outlined">
        alternate_email
        </span>
         Academic Email</mat-label>
    <mat-error *ngIf="loginForm.get('email')!.hasError?.('emailValidatorPattern')">Only academic emails are valid</mat-error>
    <mat-error *ngIf="loginForm.get('email')!.hasError?.('invalidEmail')">No account matches this email</mat-error>
    <mat-error *ngIf="loginForm.get('email')!.hasError?.('emailValidatorPattern')">This email hasn't been validated yet</mat-error>
    <ng-template #found>
  </ng-template>
  <span matSuffix class="material-symbols-outlined" matTooltip="Skalarly requires an academic email">
    info
    </span>
  </mat-form-field>
  <!-- enter password -->
  <mat-form-field  appearance="outline">
    <!-- email -->
 <input matInput formControlName="password" required type="password"
 id="skalarlyPassword" />
 <mat-label [class.email-valid]="loginForm.get('password')!.valid">
  <span matSuffix class="material-symbols-outlined" [class.condition-met]="loginForm.get('password')!.valid">
    key
    </span>
   Password</mat-label>
 <mat-error *ngIf="showPasswordError">Please enter a valid Skalarly password</mat-error>
<button matSuffix mat-icon-button  [ngClass]="{ 'showing': visiblePassword }"
(click)="toggleVisibility()" [@toggleAnimation]="visiblePassword"
matTooltip="{{ visiblePassword ? 'Show Password' : 'Hide Password' }}" >
<span class="material-symbols-outlined">
  <ng-container *ngIf="visiblePassword; else hide">
visibility
</ng-container>
<ng-template #hide>
visibility_off
</ng-template>
</span>
</button>
</mat-form-field>
<!-- add rest -->
<button mat-raised-button *ngIf="!isLoading; else loading" type="submit"
[@shakeAnimation]="failedLoginAnimation" (keydown.enter)="enterClicked()">Login</button>
<ng-template #loading>
  Logging in 
  <!-- have color change, look at font awesomelog in pg example -->
  <span [class.dot-pulse]="isLoading">
  </span>
</ng-template>
</form>

<button  mat-button disableRipple routerLink="/forgot-password">
  Forgot Password?
</button>
<button mat-raised-button routerLink="/sign-up" color="primary" signup>Create A New Account</button>
</ng-container>

<div class="welcome-text" [@welcomeAnimation]="animationState">Welcome to Skalarly</div>

</div>
</body>
</html>