  <!-- logo and welcoming words -->
<div class="login-header">
  <!-- logo glows on valid login -->
  <img ngSrc="../../assets/images/Skalar_Hat_Icon.png" alt="Skalar Grad Wizard Hat Icon" 
   priority  width="252" height="200" sizes="30vw">
  <div skalarly>
  Skalarly
  </div>
<h2> Enhance Your University Experience</h2>
</div>
<!-- content projection to be used in error handler -->
  <ng-container login-content>
      <!-- pre load skeleton -->
      <form *ngIf="!loaded; else onLoaded">
      <div column>
      <div class="input-boxes-skeleton" >
      <div class="skeleton-wrap">
        <ngx-skeleton-loader appearance="custom-content" class="input-skeleton" one></ngx-skeleton-loader>
        <ngx-skeleton-loader appearance="line" stayIn></ngx-skeleton-loader>
      </div>
        <!-- Skeleton for the password input -->
      <div class="skeleton-wrap">
        <ngx-skeleton-loader appearance="custom-content" class="input-skeleton" two></ngx-skeleton-loader>
        <ngx-skeleton-loader appearance="line" forgot></ngx-skeleton-loader>
      </div>
      </div>
      <ngx-skeleton-loader appearance="circle" [theme]="skeletonTheme" circle></ngx-skeleton-loader>
      <ngx-skeleton-loader appearance="custom-content" class="input-skeleton-join"></ngx-skeleton-loader>
      </div>
    </form>
        <!-- Skeleton for th FAB button -->
 <!-- rendered content -->
 <ng-template #onLoaded>
<form [formGroup]="loginForm" (ngSubmit)="login()">
  <div class="input-boxes" >
    <div>
    <span inputs>
    <div column>
  <!-- enter email -->
  <mat-form-field  appearance="outline">
    <input matInput formControlName="email"  placeholder="ex: name@institution.ca" type="email"
    id="skalarlyEmail" [appGlowBorder]="isGlowing" />
    <mat-label [class.condition-met]="emailFound" >
         Academic Email</mat-label>
    <mat-error *ngIf="loginForm.get('email')!.hasError?.('emailNotFound')">No account matches this email</mat-error>
  <mat-icon matPrefix class="material-symbols-outlined" 
    [@spinAndChange]="emailState">
    <ng-container *ngIf="emailState === 'initial'"> alternate_email </ng-container>
    <ng-container *ngIf="emailState === 'check'">check_circle</ng-container>
  </mat-icon>
  </mat-form-field>
  <div class="login-options">
    <!-- Keep skalar logged in -->
    <mat-checkbox [checked]="stayLoggedIn" (change)="stayIn()" >
      Stay logged in (1 month)</mat-checkbox>
    </div>
    </div>
  <!-- enter password -->
  <div column>
  <mat-form-field appearance="outline">
    <span matPrefix class="material-symbols-outlined"
    [@lockAnimation]="lockState" placeholder="Password" >
      <ng-container *ngIf="!isPasswordValid; else unlock">
    <mat-icon>
        lock
    </mat-icon>
        </ng-container>
        <ng-template #unlock>
    <mat-icon>
        lock_open
    </mat-icon>
        </ng-template>
      </span>
 <input matInput formControlName="password" placeholder="Password" type="password"
 #skalarlyPassword [appGlowBorder]="isGlowing" />
 <mat-label [class.condition-met]="loginForm.get('password')!.valid">
   Password</mat-label>
 <mat-error *ngIf="loginForm.get('password')!.hasError?.('invalidPassword')">Invalid password</mat-error>
<button matSuffix mat-icon-button type="button" 
(click)="toggleVisibility()" [@toggleAnimation]="visiblePassword"
matTooltip="{{ visiblePassword ? 'Show Password' : 'Hide Password' }}" >
<span class="material-symbols-outlined">
  <ng-container *ngIf="visiblePassword; else hide">
    <mat-icon>
      visibility
    </mat-icon>
</ng-container>
<ng-template #hide>
  <mat-icon>
    visibility_off
  </mat-icon>
</ng-template>
</span>
</button>
</mat-form-field>
<button type="button" (click)="navigate()" forgot>
  <i>Forgot Password?</i>
</button>
</div>
</span>
<!-- Login Button -->
<div loginButton >
  <button mat-fab type="submit" *ngIf="progressState === 'default'" 
  [appValidationAnimation]='loginForm.valid' [@shakeAnimation]="failedLoginAnimation"
  (keydown.enter)="enterClicked()" class="material-symbols-outlined" >
  fingerprint
  </button>
<!-- Processing login -->
<button mat-raised-button *ngIf="progressState === 'load'">
  Authenticating
  <span class="dot-pulse">
  </span>
</button>
<ng-template *ngIf="progressState === 'complete'">
<button mat-icon-button class="material-symbols-outlined" class="glowing-text">
 approval_delegation
</button>
</ng-template>
</div>
</div>
</div>
</form>
  <div loginButton >
  <button mat-raised-button routerLink="/sign-up" join>
Join Skalarly
  </button>
  </div>
</ng-template>
</ng-container>

  <div class="welcome-text">
    <ng-container *ngFor="let item of welcomeText; index as i; last as isLast; trackBy: trackByLetter">
      <span
        *ngIf="item.letter !== ' '; else emptySpace"
        [ngClass]="{ 'sparkle': isLast && item.visible }">
        {{ item.letter }}
      </span>
      <ng-template #emptySpace>&nbsp;</ng-template>
    </ng-container>
  </div>
