<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Login Page</title>
</head>

<body>
  <!-- logo and welcoming words -->
<div class="login-header">
<figure>
  <!-- logo glows on valid login -->
  <img ngSrc="../../assets/images/Skalar_Hat_Icon.png" fill priority class="logo">
  <figcaption>
  Skalarly
  </figcaption>
</figure>
<h2> Enhance Your University Experience</h2>
</div>

<!-- content projection to be used in error handler -->
  <ng-container login-content>
<form [formGroup]="loginForm" (ngSubmit)="login()">
  <div class="input-boxes">
  <!-- enter email -->
  <mat-form-field  appearance="outline" email>
    <!-- <span matPrefix class="material-symbols-outlined">
      alternate_email
      </span> -->
    <input matInput formControlName="email" placeholder="ex: name@institution.ca" type="email"
    id="skalarlyEmail" />
    <mat-label [class.condition-met]="emailFound" >
         Academic Email</mat-label>
    <mat-error *ngIf="loginForm.get('email')!.hasError?.('emailNotFound')">No account matches this email</mat-error>
  <mat-icon matPrefix class="material-symbols-outlined" [matTooltip]="'Skalarly requires an academic email'">
    <ng-container>
    alternate_email
    </ng-container>
    <ng-template> check_circle</ng-template>
    
  </mat-icon>

  </mat-form-field>
  <!-- enter password -->
  <mat-form-field  appearance="outline" password>
    <span matPrefix class="material-symbols-outlined" [@lockAnimation]="lockState" placeholder="Password" >
      <ng-container *ngIf="!isPasswordValid; else unlock">
    <mat-icon>
        lock
    </mat-icon>
        </ng-container>
        <ng-template #unlock>
    <mat-icon>
        lock_open
    </mat-icon>
        </ng-template>
      </span>
 <input matInput formControlName="password" placeholder="Password" type="password"
 #skalarlyPassword />
 <mat-label [class.condition-met]="loginForm.get('password')!.valid">
   Password</mat-label>
 <mat-error *ngIf="loginForm.get('password')!.hasError?.('invalidPassword')">Invalid password</mat-error>
<button matSuffix mat-icon-button type="button" 
(click)="toggleVisibility()" [@toggleAnimation]="visiblePassword"
matTooltip="{{ visiblePassword ? 'Show Password' : 'Hide Password' }}" >
<span class="material-symbols-outlined">
  <ng-container *ngIf="visiblePassword; else hide">
    <mat-icon>
      visibility
    </mat-icon>
</ng-container>
<ng-template #hide>
  <mat-icon>
    visibility_off
  </mat-icon>
</ng-template>
</span>
</button>
</mat-form-field>
</div>
<!-- Login Button -->
<button mat-raised-button type="submit" #loginButton class=""
[@shakeAnimation]="failedLoginAnimation" [appValidationAnimation]='loginForm.valid'
 (keydown.enter)="enterClicked()" >
 <ng-container *ngIf="!isLoading; else loading">
  Sign in 
</ng-container>
<!-- Processing login -->
<ng-template #loading>
  Signing in 
  <span [class.dot-pulse]="isLoading">
  </span>
</ng-template></button>
</form>
</ng-container>
<!-- other options -->
<div class="login-options">
<!-- Keep skalar logged in -->
<mat-checkbox [checked]="stayLoggedIn" (change)="stayIn()" >
  Stay logged in (1 month)</mat-checkbox>
<button  mat-button routerLink="/forgot-password" >
  <i>Forgot Password?</i>
</button>
</div>
<span class="join-btn">
<button mat-raised-button routerLink="/sign-up" btn>Join Skalarly</button>
</span>

<div class="welcome-text" [@welcomeAnimation]="animationState">Welcome to Skalarly</div>
</body>
</html>